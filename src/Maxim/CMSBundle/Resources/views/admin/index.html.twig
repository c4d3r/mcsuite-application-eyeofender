<html>
<head>
	<title>ACP - MMOSuite</title>
	<script type="text/javascript" src="http://ajax.aspnetcdn.com/ajax/jQuery/jquery-1.8.2.min.js"></script>

    <link rel="stylesheet" type="text/css" href="{{ asset('bundles/maximcms/fonts/style.css') }}"/>
    <link rel="stylesheet" type="text/css" href="{{ asset('bundles/maximcms/css/jquery-ui-1.8.16.custom.css') }}"/>
    <link rel="stylesheet" type="text/css" href="{{ asset('bundles/maximcms/css/style.css') }}"/>
    <link rel="stylesheet" type="text/css" href="{{ asset('bundles/maximcms/css/poll.css') }}"/>
    <link rel="stylesheet" type="text/css" href="{{ asset('bundles/maximcms/plugins/multiselect/ui.multiselect.css') }}"/>
    <link rel="stylesheet" type="text/css" href="{{ asset('bundles/maximcms/plugins/tag-it/jquery.tagit.css') }}"/>
    <link rel="stylesheet" type="text/css" href="{{ asset('bundles/maximcms/plugins/dataTables/jquery.dataTables_themeroller.css') }}"/>
    <link rel="stylesheet" type="text/css" href="{{ asset('bundles/maximcms/plugins/codemirror/codemirror.css') }}"/>

    <script src="{{ asset('bundles/maximcms/plugins/ckeditor/ckeditor.js') }}" type="text/javascript" ></script>
    <script src="{{ asset('bundles/maximcms/js/jquery-ui-1.9.2.custom.min.js') }}" type="text/javascript" ></script>
    <script src="{{ asset('bundles/maximcms/js/UI.js') }}" type="text/javascript" ></script>
    <script src="{{ asset('bundles/maximcms/js/AJAX.js') }}" type="text/javascript" ></script>

    <script src="{{ asset('bundles/maximcms/plugins/dd/jquery.dd.min.js') }}" type="text/javascript" ></script>
    <script src="{{ asset('bundles/maximcms/plugins/dataTables/jquery.dataTables.min.js') }}" type="text/javascript" ></script>
    <script src="{{ asset('bundles/maximcms/plugins/tableTools/TableTools.min.js') }}" type="text/javascript" ></script>
    <script src="{{ asset('bundles/maximcms/plugins/codemirror/codemirror.js') }}" type="text/javascript" ></script>
    <script src="{{ asset('bundles/maximcms/plugins/multiselect/ui.multiselect.js') }}" type="text/javascript" ></script>
    <script src="{{ asset('bundles/maximcms/plugins/tag-it/tag-it.min.js') }}" type="text/javascript" ></script>

	{% block head %}
	{% endblock head %}
</head>
<body>
	<div id="top-bar">
		<div class="profile">
            <a href="{{ path('home') }}" style="float:left">
			    <img src="/bundles/maximcms/acp/images/avatars/minecraft.png" alt="avatar"/>
            </a>
			<div class="vertical">
				<h1>{{ app.user.username }}</h1>
			</div>
		</div>
	</div>
    <div id="left-bar-bg"></div>
	<div id="left-bar">
		<img src="/bundles/maximcms/acp/images/nav_seperator_horizontal.png" alt="seperator"/>
		<!-- NAVIGATION -->
		<ul id="left-bar-nav">
			<li>
				<a href="{{ path('admin') }}">
                    <div data-icon="&#xf108;"></div>
					<span>Dashboard</span>
				</a>
			</li>
			<img src="/bundles/maximcms/acp/images/nav_seperator_horizontal.png" alt="seperator"/>
			<li>
				<a href="{{ path('admin_news')}}">
                    <div data-icon="&#xf03a;"></div>
					<span>News</span>
				</a>
			</li>
			<img src="/bundles/maximcms/acp/images/nav_seperator_horizontal.png" alt="seperator"/>
			<li>
				<a href="{{ path('admin_user')}}">
                    <div data-icon="&#xf007;"></div>
					<span>Users</span>
				</a>
			</li>
            <img src="/bundles/maximcms/acp/images/nav_seperator_horizontal.png" alt="seperator"/>
            <li>
                <a href="{{ path('admin_ranks')}}">
                    <div data-icon="&#xf007;"></div>
                    <span>Ranks</span>
                </a>
            </li>
			<img src="/bundles/maximcms/acp/images/nav_seperator_horizontal.png" alt="seperator"/>
			<li>
				<a href="{{ path('admin_vote')}}">
                    <div data-icon="&#xf006;""></div>
					<span>Vote</span>
				</a>
			</li>
			<img src="/bundles/maximcms/acp/images/nav_seperator_horizontal.png" alt="seperator"/>
			<li>
				<a href="{{ path('admin_page')}}">
                    <div data-icon="&#xf016;"></div>
					<span>Pages</span>
				</a>
			</li>
			<img src="/bundles/maximcms/acp/images/nav_seperator_horizontal.png" alt="seperator"/>
			<li>
				<a href="{{ path('admin_purchase')}}">
                    <div data-icon="&#xf09d;"></div>
					<span>Purchases</span>
				</a>
			</li>
			<img src="/bundles/maximcms/acp/images/nav_seperator_horizontal.png" alt="seperator"/>
			<li>
				<a href="{{ path('admin_shop')}}">
                    <div data-icon="&#xf07a;"></div>
					<span>Shop</span>
				</a>
			</li>
			<img src="/bundles/maximcms/acp/images/nav_seperator_horizontal.png" alt="seperator"/>
			<li>
				<a href="{{ path('admin_poll')}}">
                    <div data-icon="&#xf0ca;"></div>
					<span>Poll</span>
				</a>
			</li>
			<img src="/bundles/maximcms/acp/images/nav_seperator_horizontal.png" alt="seperator"/>
			<li>
				<a href="{{ path('admin_application')}}">
                    <div data-icon="&#xf00b;"></div>
					<span>Applications</span>
				</a>
			</li>
		</ul>
	</div>

	<div id="middle">
		{% block middle %}
		<div id="middle_menu_top">
			<div class="vertical">
				<h1>Dashboard</h1>
			</div>
			<div id="middle_menu_right" style="margin-top:-40px;margin-right:150px;float:right;">

			</div>
		</div>
		<div id="middle_menu_small">
			<ul>
				<li><a href="#">test1</a></li>
				<li><a href="#">test2</a></li>
				<li><a href="#">test3</a></li>
			</ul>
			
		</div>
		<div id="middle_content">
			<div class="window">
				<div class="window-header">
					<h6>Content</h6>
				</div>
				<div class="window-content">
					<ul>
						<li>{{ registers.amount }} people registered in the past 24 hours</li>
						<li>total useraccounts verified: {{ useraccounts.amount }}</li>
					</ul>
				</div>
			</div>
			
			<div class="window" style="width:45%;float:left;">
				<div class="window-header">
					<h6>Modules</h6>
				</div>
				<div class="window-content">
                    <div id="msgbox"></div>
					<table id="table_id" class="rowhover">
						<tr>
							<th>Name:</th>
							<th>Author:</th>
							<th>Version:</th>
                            <th>Config:</th>
                            <th>Acp:</th>
                            <th>Action:</th>
						</tr>
					{% for module in modules %}
						<tr class="tooltip-modules" title="{{ module.description }}">
							<td>{{ module.name }}</td>
							<td>{{ module.author }}</td>
							<td>{{ module.version }}</td>
                            {% if module.hasConfig %}
                            <td><a class="module_change ui-button ui-widget ui-state-default ui-corner-all ui-button-text-only" href="{{ path('admin_edit', {file: 'Controller/Module/' ~ module.name ~ '/' ~ module.name ~ 'Config.yml'}) }}">Edit configs</a></td>
                            {% else %}
                            <td>No Config</td>
                            {% endif %}
                            {% if module.hasAcp %}
                            <td><a class="module_change ui-button ui-widget ui-state-default ui-corner-all ui-button-text-only" href="{{ path('admin_pattern') }}/module/{{ module.name }}">Acp</a></td>
                            {% else %}
                            <td>No ACP</td>
							{% endif %}
                            {% if module.activated == 1 %}
								<td><button class="module_change ui-button ui-widget ui-state-default ui-corner-all ui-button-text-only" value="{{ module.id }}">Disable</button></td>
							{% else %}
								<td><button class="module_change ui-button ui-widget ui-state-default ui-corner-all ui-button-text-only" value="{{ module.id }}">Enable</button></td>
							{% endif %}
							
						</tr>
					{% endfor %}
					</table>
				</div>
			</div>

            <div class="window" style="width:30%;float:left;">
                <div class="window-header">
                    <h6>Version</h6>
                </div>
                <div class="window-content">
                    <div id="msgbox"></div>
                    VERSION: 2.0
                    <table>
                        <tr>
                            <td>Application settings</td>
                            <td><a class="module_change ui-button ui-widget ui-state-default ui-corner-all ui-button-text-only" href="{{ path('admin_edit', {file: 'Resources/config/globals.yml'}) }}">SETTINGS</a></td>
                        </tr>
                        <tr>
                            <td>CMS Settings</td>
                            <td><a class="module_change ui-button ui-widget ui-state-default ui-corner-all ui-button-text-only" href="{{ path('admin_edit', {file: 'Resources/config/settings.yml'}) }}">SETTINGS</a></td>
                        </tr>
                    </table>

                </div>
            </div>
		</div>
		{% endblock middle %}
	</div>
	<script>
	  $(function() {
        $('#left-bar-bg').css("height", $(window).height());
        //Select picker
        $('.selectpicker').selectpicker();
	    $( ".tooltip-modules" ).tooltip({
	      show: null,
	      track: true,
	      open: function( event, ui ) {
	        ui.tooltip.animate({ top: ui.tooltip.position().top + 10 }, "fast" );
	      }
	    });
	  });
	  
	  $('.module_change').click(function()
	  {
	  	var status = $(this).text();
	  	if(status == "Disable")
	  	{
	  		status = 0;
	  	}
	  	else
	  	{
	  		status = 1;
	  	}
	  	AJAX.post(
			"{{ path('admin_module_disable') }}", 
			{
				_module_id : $(this).val(),
				_module_active : status
			}, 
			$("#msgbox"),
			$('.module_disable')
		);
	  });
  </script>
</body>
</html>